{% extends "base_admin.html" %}
{% block title %}Dashboards Admin{% endblock %}
{% block content %}

<h1 class="mb-4 text-center">Bem-vindo ao ambiente Geral</h1>

<!-- Seleção de Dashboard -->
<div class="mb-3">
  <label for="dashboardSelect" class="form-label">Selecione o Dashboard:</label>
  <select id="dashboardSelect" class="form-select" name="homepage" required>
    <option value="" disabled selected>-- Escolha um Dashboard --</option>
    {% for dash in dashboards %}
      <option value="{{ dash['link'] }}" data-cliente="{{ dash['cliente'] }}">
        {{ dash['nome_dashboard'] }}
      </option>
    {% endfor %}
  </select>
</div>

<!-- Botão Carregar Dashboard com cor personalizada -->
<style>
  #loadDashboard {
    background-color: #5B4492; /* cor roxa */
    color: white;              /* texto branco */
    border: none;
  }

  #loadDashboard:hover {
    background-color: #483476; /* tom mais escuro ao passar o mouse */
  }
</style>

<button type="button" id="loadDashboard" class="btn">Carregar Dashboard</button>

<!-- Iframe para exibir o Dashboard -->
<div class="ratio ratio-16x9 mt-3">
  <iframe 
      id="dashboardFrame"
      title="Dashboard"
      src=""
      frameborder="0"
      allowfullscreen>
  </iframe>
</div>

<!-- Script de controle do Dashboard -->
<script>
const dashboardSelect = document.getElementById('dashboardSelect');
const dashboardFrame = document.getElementById('dashboardFrame');
const loadButton = document.getElementById('loadDashboard');

loadButton.addEventListener('click', function() {
  const selectedOption = dashboardSelect.options[dashboardSelect.selectedIndex];
  const dashboardLink = selectedOption.value;

  if(dashboardLink){
    dashboardFrame.src = dashboardLink;
  } else {
    alert("Selecione um dashboard antes de carregar!");
  }
});
</script>

{% endblock %}
